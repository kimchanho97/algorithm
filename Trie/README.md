## [플래3]아름다운 이름(http://www.acmicpc.net/problem/3080)

- 문제: 같은 알파벳 순서로 시작하는 두 이름의 사이에는 모두 그 순서로 시작하는 단어가 있어야 한다. 규칙을 지키면서 학생들 이름의 순서를 정하는 방법의 수를 구하는 프로그램을 작성하시오.

* 알고리즘: `트라이`

* 해설: 일반적인 트라이로 구현하면 메모리 초과가 발생한다.

  - 힌트: **트라이 최적화**

    - [일반적인 트라이 구현(참고)](https://github.com/kimchanho97/algorithm/blob/main/Trie/boj5052.md)

    - 문제 해결 방법

      문제를 분석해보면 다음과 같다.

      ```
      [MAT][MAR] -> [MAT][MARA [MARTA, MARTI] MARI]
      ```

      Trie를 재귀적으로 탐색하면서 만약 child가 존재할 경우 `n(child 갯수)!`만큼의 경우의 수를 가진다. 또한 만약 해당 노드가 data가 존재할 경우 각각의 묶음 사이에 존재할 수 있으므로 `(n + 1)`의 경우의 수가 추가로 생긴다.

    - 문자열 최적화

      메모리 초과가 발생하기 때문에 문자열을 삽입하는 과정에서 최적화를 해주어야 한다. 우리가 필요한 데이터는 노드의 child갯수, 그리고 data유무인데 어디 문자열까지 저장할 것인가?

      -> 문자열을 정렬해보면 다음과 같다.

      ```
      ['MARA', 'MARICA', 'MARTA', 'MARTINA', 'MATO']
      ['MARA', 'MARI', 'MARTA', 'MARTI', 'MAT']  # 삽입할 문자열
      ```

      각 문자열은 i-1번째 문자열, i+1번째 문자열 중 가장 prefix가 길게 겹친다. 그래서 양쪽 문자열과 가장 길게 겹치는 `longest_common_prefix`를 구한 뒤 +1만큼의 문자열을 트라이에 삽입해주면 된다. 이후의 문자들을 해당 자식을 2개 이상 가지는 노드가 존재하지 않기에 메모리적으로 세이브할 수 있다.

  - 입력

    ```
    5
    MARICA
    MARTA
    MATO
    MARA
    MARTINA
    ```

  - 출력

    ```
    24
    ```

<br>
